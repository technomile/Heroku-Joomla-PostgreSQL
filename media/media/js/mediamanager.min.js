!function(e,t){"use strict";function a(t){var a={};return t=t||"",e.each(t.split(/[&;]/),function(e,t){var r=t.split("=");a[decodeURIComponent(r[0])]=2==r.length?decodeURIComponent(r[1]):null}),a}function r(t){var a={},r=t.match(/^(?:([^:\/?#.]+):)?(?:\/\/)?(([^:\/?#]*)(?::(\d*))?)((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[\?#]|$)))*\/?)?([^?#\/]*))?(?:\?([^#]*))?(?:#(.*))?/);return e.each(["uri","scheme","authority","domain","port","path","directory","file","query","fragment"],function(e,t){a[t]=r&&r[e]?r[e]:""}),a}function n(e){return e.scheme+"://"+e.domain+(e.port?":"+e.port:"")+(e.path?e.path:"/")+(e.query?"?"+e.query:"")+(e.fragment?"#"+e.fragment:"")}var o=t.MediaManager={initialize:function(){this.folderpath=e("#folderpath"),this.updatepaths=e("input.update-folder"),this.frame=window.frames.folderframe,this.frameurl=this.frame.location.href},submit:function(t){var a=this.frame.document.getElementById("mediamanager-form");a.task.value=t,e("#username").length&&(a.username.value=e("#username").val(),a.password.value=e("#password").val()),a.submit()},onloadframe:function(){this.frameurl=this.frame.location.href;var t,o,i=this.getFolder()||"",l=[],u=r(e("#uploadForm").attr("action")),s=a(u.query);this.updatepaths.each(function(e,t){t.value=i}),this.folderpath.value=basepath+(i?"/"+i:""),s.folder=i;for(t in s)s.hasOwnProperty(t)&&(o=s[t],l.push(t+(null===o?"":"="+o)));u.query=l.join("&"),u.fragment=null,e("#uploadForm").attr("action",n(u)),e("#"+viewstyle).addClass("active")},setViewType:function(t){e("#"+t).addClass("active"),e("#"+viewstyle).removeClass("active"),viewstyle=t;var a=this.getFolder();this.setFrameUrl("index.php?option=com_media&view=mediaList&tmpl=component&folder="+a+"&layout="+t)},refreshFrame:function(){this.setFrameUrl()},getFolder:function(){var e=a(this.frame.location.search.substring(1));return e.folder=void 0===e.folder?"":e.folder,e.folder},setFrameUrl:function(e){null!==e&&(this.frameurl=e),this.frame.location.href=this.frameurl}};e(function(){o.initialize(),document.updateUploader=function(){o.onloadframe()},o.onloadframe()})}(jQuery,window);
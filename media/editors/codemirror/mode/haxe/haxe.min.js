!function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(a){"use strict";a.defineMode("haxe",function(a,b){function c(a,b,c){return b.tokenize=c,c(a,b)}function d(a,b){for(var c,d=!1;null!=(c=a.next());){if(c==b&&!d)return!1;d=!d&&"\\"==c}return d}function e(a,b,c){return S=a,T=c,b}function f(a,b){var f=a.next();if('"'==f||"'"==f)return c(a,b,g(f));if(/[\[\]{}\(\),;\:\.]/.test(f))return e(f);if("0"==f&&a.eat(/x/i))return a.eatWhile(/[\da-f]/i),e("number","number");if(/\d/.test(f)||"-"==f&&a.eat(/\d/))return a.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),e("number","number");if(b.reAllowed&&"~"==f&&a.eat(/\//))return d(a,"/"),a.eatWhile(/[gimsu]/),e("regexp","string-2");if("/"==f)return a.eat("*")?c(a,b,h):a.eat("/")?(a.skipToEnd(),e("comment","comment")):(a.eatWhile(W),e("operator",null,a.current()));if("#"==f)return a.skipToEnd(),e("conditional","meta");if("@"==f)return a.eat(/:/),a.eatWhile(/[\w_]/),e("metadata","meta");if(W.test(f))return a.eatWhile(W),e("operator",null,a.current());var i;if(/[A-Z]/.test(f))return a.eatWhile(/[\w_<>]/),i=a.current(),e("type","variable-3",i);a.eatWhile(/[\w_]/);var i=a.current(),j=V.propertyIsEnumerable(i)&&V[i];return j&&b.kwAllowed?e(j.type,j.style,i):e("variable","variable",i)}function g(a){return function(b,c){return d(b,a)||(c.tokenize=f),e("string","string")}}function h(a,b){for(var c,d=!1;c=a.next();){if("/"==c&&d){b.tokenize=f;break}d="*"==c}return e("comment","comment")}function i(a,b,c,d,e,f){this.indented=a,this.column=b,this.type=c,this.prev=e,this.info=f,null!=d&&(this.align=d)}function j(a,b){for(var c=a.localVars;c;c=c.next)if(c.name==b)return!0}function k(a,b,c,d,e){var f=a.cc;for(Y.state=a,Y.stream=e,Y.marked=null,Y.cc=f,a.lexical.hasOwnProperty("align")||(a.lexical.align=!0);;){var g=f.length?f.pop():v;if(g(c,d)){for(;f.length&&f[f.length-1].lex;)f.pop()();return Y.marked?Y.marked:"variable"==c&&j(a,d)?"variable-2":"variable"==c&&l(a,d)?"variable-3":b}}}function l(a,b){if(/[a-z]/.test(b.charAt(0)))return!1;for(var c=a.importedtypes.length,d=0;c>d;d++)if(a.importedtypes[d]==b)return!0}function m(a){for(var b=Y.state,c=b.importedtypes;c;c=c.next)if(c.name==a)return;b.importedtypes={name:a,next:b.importedtypes}}function n(){for(var a=arguments.length-1;a>=0;a--)Y.cc.push(arguments[a])}function o(){return n.apply(null,arguments),!0}function p(a){var b=Y.state;if(b.context){Y.marked="def";for(var c=b.localVars;c;c=c.next)if(c.name==a)return;b.localVars={name:a,next:b.localVars}}}function q(){Y.state.context||(Y.state.localVars=Z),Y.state.context={prev:Y.state.context,vars:Y.state.localVars}}function r(){Y.state.localVars=Y.state.context.vars,Y.state.context=Y.state.context.prev}function s(a,b){var c=function(){var c=Y.state;c.lexical=new i(c.indented,Y.stream.column(),a,null,c.lexical,b)};return c.lex=!0,c}function t(){var a=Y.state;a.lexical.prev&&(")"==a.lexical.type&&(a.indented=a.lexical.indented),a.lexical=a.lexical.prev)}function u(a){function b(c){return c==a?o():";"==a?n():o(b)}return b}function v(a){return"@"==a?o(A):"var"==a?o(s("vardef"),J,u(";"),t):"keyword a"==a?o(s("form"),w,v,t):"keyword b"==a?o(s("form"),v,t):"{"==a?o(s("}"),q,I,t,r):";"==a?o():"attribute"==a?o(z):"function"==a?o(N):"for"==a?o(s("form"),u("("),s(")"),L,u(")"),t,v,t):"variable"==a?o(s("stat"),E):"switch"==a?o(s("form"),w,s("}","switch"),u("{"),I,t,t):"case"==a?o(w,u(":")):"default"==a?o(u(":")):"catch"==a?o(s("form"),q,u("("),R,u(")"),v,t,r):"import"==a?o(C,u(";")):"typedef"==a?o(D):n(s("stat"),w,u(";"),t)}function w(a){return X.hasOwnProperty(a)?o(y):"function"==a?o(N):"keyword c"==a?o(x):"("==a?o(s(")"),x,u(")"),t,y):"operator"==a?o(w):"["==a?o(s("]"),H(w,"]"),t,y):"{"==a?o(s("}"),H(G,"}"),t,y):o()}function x(a){return a.match(/[;\}\)\],]/)?n():n(w)}function y(a,b){if("operator"==a&&/\+\+|--/.test(b))return o(y);if("operator"==a||":"==a)return o(w);if(";"!=a)return"("==a?o(s(")"),H(w,")"),t,y):"."==a?o(F,y):"["==a?o(s("]"),w,u("]"),t,y):void 0}function z(a){return"attribute"==a?o(z):"function"==a?o(N):"var"==a?o(J):void 0}function A(a){return":"==a?o(A):"variable"==a?o(A):"("==a?o(s(")"),H(B,")"),t,v):void 0}function B(a){return"variable"==a?o():void 0}function C(a,b){return"variable"==a&&/[A-Z]/.test(b.charAt(0))?(m(b),o()):"variable"==a||"property"==a||"."==a||"*"==b?o(C):void 0}function D(a,b){return"variable"==a&&/[A-Z]/.test(b.charAt(0))?(m(b),o()):"type"==a&&/[A-Z]/.test(b.charAt(0))?o():void 0}function E(a){return":"==a?o(t,v):n(y,u(";"),t)}function F(a){return"variable"==a?(Y.marked="property",o()):void 0}function G(a){return"variable"==a&&(Y.marked="property"),X.hasOwnProperty(a)?o(u(":"),w):void 0}function H(a,b){function c(d){return","==d?o(a,c):d==b?o():o(u(b))}return function(d){return d==b?o():n(a,c)}}function I(a){return"}"==a?o():n(v,I)}function J(a,b){return"variable"==a?(p(b),o(O,K)):o()}function K(a,b){return"="==b?o(w,K):","==a?o(J):void 0}function L(a,b){return"variable"==a&&p(b),o(s(")"),q,M,w,t,v,r)}function M(a,b){return"in"==b?o():void 0}function N(a,b){return"variable"==a?(p(b),o(N)):"new"==b?o(N):"("==a?o(s(")"),q,H(R,")"),t,O,v,r):void 0}function O(a){return":"==a?o(P):void 0}function P(a){return"type"==a?o():"variable"==a?o():"{"==a?o(s("}"),H(Q,"}"),t):void 0}function Q(a){return"variable"==a?o(O):void 0}function R(a,b){return"variable"==a?(p(b),o(O)):void 0}var S,T,U=a.indentUnit,V=function(){function a(a){return{type:a,style:"keyword"}}var b=a("keyword a"),c=a("keyword b"),d=a("keyword c"),e=a("operator"),f={type:"atom",style:"atom"},g={type:"attribute",style:"attribute"},h=a("typedef");return{"if":b,"while":b,"else":c,"do":c,"try":c,"return":d,"break":d,"continue":d,"new":d,"throw":d,"var":a("var"),inline:g,"static":g,using:a("import"),"public":g,"private":g,cast:a("cast"),"import":a("import"),macro:a("macro"),"function":a("function"),"catch":a("catch"),untyped:a("untyped"),callback:a("cb"),"for":a("for"),"switch":a("switch"),"case":a("case"),"default":a("default"),"in":e,never:a("property_access"),trace:a("trace"),"class":h,"abstract":h,"enum":h,"interface":h,typedef:h,"extends":h,"implements":h,dynamic:h,"true":f,"false":f,"null":f}}(),W=/[+\-*&%=<>!?|]/,X={atom:!0,number:!0,variable:!0,string:!0,regexp:!0},Y={state:null,column:null,marked:null,cc:null},Z={name:"this",next:null};return t.lex=!0,{startState:function(a){var c=["Int","Float","String","Void","Std","Bool","Dynamic","Array"];return{tokenize:f,reAllowed:!0,kwAllowed:!0,cc:[],lexical:new i((a||0)-U,0,"block",!1),localVars:b.localVars,importedtypes:c,context:b.localVars&&{vars:b.localVars},indented:0}},token:function(a,b){if(a.sol()&&(b.lexical.hasOwnProperty("align")||(b.lexical.align=!1),b.indented=a.indentation()),a.eatSpace())return null;var c=b.tokenize(a,b);return"comment"==S?c:(b.reAllowed=!("operator"!=S&&"keyword c"!=S&&!S.match(/^[\[{}\(,;:]$/)),b.kwAllowed="."!=S,k(b,c,S,T,a))},indent:function(a,b){if(a.tokenize!=f)return 0;var c=b&&b.charAt(0),d=a.lexical;"stat"==d.type&&"}"==c&&(d=d.prev);var e=d.type,g=c==e;return"vardef"==e?d.indented+4:"form"==e&&"{"==c?d.indented:"stat"==e||"form"==e?d.indented+U:"switch"!=d.info||g?d.align?d.column+(g?0:1):d.indented+(g?0:U):d.indented+(/^(?:case|default)\b/.test(b)?U:2*U)},electricChars:"{}",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}}),a.defineMIME("text/x-haxe","haxe"),a.defineMode("hxml",function(){return{startState:function(){return{define:!1,inString:!1}},token:function(a,b){var c=a.peek(),d=a.sol();if("#"==c)return a.skipToEnd(),"comment";if(d&&"-"==c){var e="variable-2";return a.eat(/-/),"-"==a.peek()&&(a.eat(/-/),e="keyword a"),"D"==a.peek()&&(a.eat(/[D]/),e="keyword c",b.define=!0),a.eatWhile(/[A-Z]/i),e}var c=a.peek();return 0==b.inString&&"'"==c&&(b.inString=!0,c=a.next()),1==b.inString?(a.skipTo("'")||a.skipToEnd(),"'"==a.peek()&&(a.next(),b.inString=!1),"string"):(a.next(),null)},lineComment:"#"}}),a.defineMIME("text/x-hxml","hxml")});